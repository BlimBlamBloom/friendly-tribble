<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chapter 3 第三章 - 奇怪的世界</title>
<style>
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    max-width: 800px;
    margin: 40px auto;
    padding: 0 20px;
    background-color: #fafafa;
    color: #333;
  }
  h1 {
    text-align: center;
    color: #0073e6;
    margin-bottom: 30px;
  }
  #chinese-text {
    white-space: pre-wrap;
    font-size: 1.25em;
    line-height: 2.2;
    margin-bottom: 30px;
    padding: 15px 20px;
    background-color: #ffffff;
    border: 1px solid #d1e3fc;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0, 115, 230, 0.1);
    font-family: "Noto Sans SC", "Microsoft Yahei", Arial, sans-serif;
    letter-spacing: 0.03em;
    text-indent: 2em;
  }
  #chinese-text p {
    margin-bottom: 1.5em;
  }
  #pinyin-text, #english-text {
    display: none;
    background: #eef6ff;
    border: 1px solid #b3d1ff;
    padding: 15px;
    margin: 10px 0 20px 0;
    white-space: pre-wrap;
    font-size: 1.1em;
  }
  button.toggle-btn {
    background-color: #0073e6;
    color: white;
    border: none;
    padding: 10px 18px;
    margin-right: 10px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
  }
  button.toggle-btn:hover {
    background-color: #005bb5;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    margin-top: 30px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: left;
  }
  th {
    background-color: #e6f2ff;
    font-weight: bold;
  }
  tr:nth-child(even) {
    background-color: #f9f9f9;
  }
  #quiz-container {
    margin-top: 40px;
  }
  .option-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin: 20px 0;
  }
  .option-card {
    padding: 16px;
    background-color: #e0f0ff;
    border-radius: 12px;
    text-align: center;
    cursor: pointer;
    font-size: 1.1em;
    transition: background-color 0.3s ease;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.1);
  }
  .option-card:hover {
    background-color: #cce7ff;
  }
  #feedback {
    font-weight: bold;
    font-size: 1.1em;
    min-height: 1.4em;
  }
  footer {
    margin-top: 50px;
    text-align: center;
  }
  footer a {
    color: #0073e6;
    text-decoration: none;
    font-size: 1.1em;
  }
  footer a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<h1>第三章: 奇怪的世界</h1>

<!-- Chinese text -->
<div id="chinese-text" style="white-space: pre-line;">
马叉叉走进了门，发现一个奇怪的世界。
这里有一棵树，树上有一只鸟。
鸟唱歌，声音很好听。
马叉叉看到一只猫，猫在看书。
猫没有说话，但是马叉叉觉得猫很聪明。
马叉叉开始走，看到一个篮球和一个排球。
篮球自己跳舞，排球自己飞。
马叉叉笑了，说：“这里真好玩！”
突然，马叉叉听到一个声音，说：“你准备好了吗？”
</div>

<!-- Buttons -->
<div style="margin-top: 15px;">
  <button class="toggle-btn" onclick="toggleVisibility('pinyin-text')">拼音</button>
  <button class="toggle-btn" onclick="toggleVisibility('english-text')">英文</button>
</div>

<!-- Pinyin text -->
<div id="pinyin-text">
Mǎ Chāchā zǒu jìn le mén, fāxiàn yí ge qíguài de shìjiè.
Zhèlǐ yǒu yì kē shù, shù shàng yǒu yì zhī niǎo.
Niǎo chànggē, shēngyīn hěn hǎotīng.
Mǎ Chāchā kàn dào yì zhī māo, māo zài kàn shū.
Māo méiyǒu shuōhuà, dànshì Mǎ Chāchā juéde māo hěn cōngmíng.
Mǎ Chāchā kāishǐ zǒu, kàn dào yí ge lánqiú hé yí ge páiqiú.
Lánqiú zìjǐ tiàowǔ, páiqiú zìjǐ fēi.
Mǎ Chāchā xiào le, shuō: “Zhèlǐ zhēn hǎowán!”
Tūrán, Mǎ Chāchā tīng dào yí ge shēngyīn, shuō: “Nǐ zhǔnbèi hǎo le ma?”
</div>

<!-- English text -->
<div id="english-text">
Ma Chacha walked through the door and found a strange world.
There was a tree, and on the tree was a bird.
The bird sang, and its voice was very beautiful.
Ma Chacha saw a cat. The cat was reading a book.
The cat did not speak, but Ma Chacha thought the cat was very smart.
Ma Chacha started to walk and saw a basketball and a volleyball.
The basketball danced by itself, and the volleyball flew by itself.
Ma Chacha smiled and said, "This place is really fun!"
Suddenly, Ma Chacha heard a voice say, "Are you ready?"
</div>

<!-- Vocabulary list -->
<h2>生词</h2>
<table>
  <thead>
    <tr>
      <th>汉字</th>
      <th>拼音</th>
      <th>意思</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>走</td><td>zǒu</td><td>to walk</td></tr>
    <tr><td>进</td><td>jìn</td><td>to enter</td></tr>
    <tr><td>发现</td><td>fāxiàn</td><td>to discover</td></tr>
    <tr><td>唱歌</td><td>chànggē</td><td>to sing</td></tr>
    <tr><td>聪明</td><td>cōngmíng</td><td>smart</td></tr>
    <tr><td>开始</td><td>kāishǐ</td><td>to start / begin</td></tr>
    <tr><td>自己</td><td>zìjǐ</td><td>oneself / itself</td></tr>
    <tr><td>跳舞</td><td>tiàowǔ</td><td>to dance</td></tr>
    <tr><td>飞</td><td>fēi</td><td>to fly</td></tr>
    <tr><td>好玩</td><td>hǎowán</td><td>fun</td></tr>
    <tr><td>准备</td><td>zhǔnbèi</td><td>to prepare / ready</td></tr>
  </tbody>
</table>

<!-- Vocabulary quiz -->
<h2>练习生词</h2>
<div id="quiz-container">
  <p><strong id="word" style="font-size: 1.5em;"></strong></p>
  <div id="options" class="option-grid"></div>
  <p id="feedback"></p>
  <p>得分: <span id="score">0</span> / <span id="total">0</span></p>
</div>

<style>
  .option-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin: 20px 0;
  }
  .option-card {
    padding: 16px;
    background-color: #e0f0ff;
    border-radius: 12px;
    text-align: center;
    cursor: pointer;
    font-size: 1.1em;
    transition: background-color 0.3s ease;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.1);
  }
  .option-card:hover {
    background-color: #cce7ff;
  }
</style>

<script>
  // Vocabulary for quiz: Chinese character keys with English meanings only (no pinyin here)
  const vocab = {
    "走": ["to walk"],
    "进": ["to enter"],
    "发现": ["to discover"],
    "唱歌": ["to sing"],
    "聪明": ["smart"],
    "开始": ["to start / begin"],
    "自己": ["oneself / itself"],
    "跳舞": ["to dance"],
    "飞": ["to fly"],
    "好玩": ["fun"],
    "准备": ["to prepare / ready"]
  };

  const words = Object.keys(vocab);
  let score = 0;
  let questionIndex = 0;
  const totalQuestions = 10;
  let currentWord = "";

  document.getElementById('total').textContent = totalQuestions;

  function getRandomOptions(correctAnswer) {
    const allAnswers = Object.values(vocab).flat().filter(a => !correctAnswer.includes(a));
    const shuffled = allAnswers.sort(() => Math.random() - 0.5);
    const wrongOptions = shuffled.slice(0, 3);
    const options = [...wrongOptions, correctAnswer[0]];
    return options.sort(() => Math.random() - 0.5);
  }

  function loadQuestion() {
    if (questionIndex >= totalQuestions) {
      document.getElementById('quiz-container').innerHTML = `
        <h3>练习完成！</h3>
        <p>你的最终得分: ${score} / ${totalQuestions}</p>
        <button onclick="restartQuiz()" style="padding: 10px 20px; font-size: 1em; margin-top: 20px;">🔁 再来一次</button>
      `;
      return;
    }

    currentWord = words[Math.floor(Math.random() * words.length)];
    const correctAnswers = vocab[currentWord];
    const options = getRandomOptions(correctAnswers);

    document.getElementById('word').textContent = currentWord;
    document.getElementById('options').innerHTML = "";

    options.forEach(option => {
      const btn = document.createElement("div");
      btn.textContent = option;
      btn.className = "option-card";
      btn.onclick = () => checkAnswer(option, correctAnswers);
      document.getElementById("options").appendChild(btn);
    });

    document.getElementById("feedback").textContent = "";
  }

  function checkAnswer(selected, correctAnswers) {
    if (correctAnswers.map(a => a.toLowerCase()).includes(selected.toLowerCase())) {
      score++;
      document.getElementById("feedback").textContent = "✅ 正确!";
    } else {
      document.getElementById("feedback").textContent = `❌ 错误。正确答案: ${correctAnswers[0]}`;
    }
    document.getElementById("score").textContent = score;
    questionIndex++;
    setTimeout(loadQuestion, 1500);
  }

  function restartQuiz() {
    score = 0;
    questionIndex = 0;

    document.getElementById('quiz-container').innerHTML = `
      <p><strong id="word" style="font-size: 1.5em;"></strong></p>
      <div id="options" class="option-grid"></div>
      <p id="feedback"></p>
      <p>得分: <span id="score">0</span> / <span id="total">${totalQuestions}</span></p>
    `;

    loadQuestion();
  }

  // Toggle visibility function for Pinyin and English
  function toggleVisibility(id) {
    const elem = document.getElementById(id);
    if (elem.style.display === "none" || elem.style.display === "") {
      elem.style.display = "block";
    } else {
      elem.style.display = "none";
    }
  }

  loadQuestion();
</script>

<footer>
  <a href="chapter2.html">← 第二章</a> | 
  <a href="chapter4.html">第四章 →</a> | 
  <a href="/chinese/short-stories/ma-chacha.html">返回首页</a>
</footer>

</body>
</html>
